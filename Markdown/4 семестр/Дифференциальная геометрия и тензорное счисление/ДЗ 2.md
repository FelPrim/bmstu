#### Задание 1
Условие:
$$\begin{gather}
\left( T^{ij} \right) =\begin{pmatrix}
1 & 0 \\
0 & -3
\end{pmatrix}, \ \left( B^{ij} \right) =\begin{pmatrix}
-2 & -1  \\
 -2 & 1
\end{pmatrix}, \ \left( Q_{\ \ i}^j \right) =\begin{pmatrix}
1 & 0 \\
1 & 2
\end{pmatrix}
\end{gather}$$
Найти:
$(C=(T\cdot B))_{ij}$ в базисе $e_{i}$
Решение:
$$\begin{gather}
\text{ Замена } \overline{e}_{i}=r_{i}\Rightarrow  \\
T=T^{ij}r_{i}\otimes r_{j},B=B^{ij}r_{i}\otimes r_{j},e_{i}=Q^j_{i}r_{j},T\cdot B=(T\cdot B)_{ij}e^{ij}  
\end{gather}$$
2 пути:
1: Переводим всё в базис $e_{i}$ и там считаем:
$$\begin{gather}
 \begin{matrix}
e_{i}=Q_{i}^jr_{j} \\
r_{j}=K^k_{j}e_{k}
\end{matrix}\Rightarrow e_{i}=Q^j_{i}K_{j}^ke_{k}=\delta_{i}^ke_{k}\Rightarrow  \\
K:Q_{i}^jK^k_{j}=\delta_{i}^k \\
\begin{pmatrix}
1 & 0 \\
1 & 2
\end{pmatrix}^{-1}=\frac{1}{2}\begin{pmatrix}
2 & 0 \\
-1 & 1
\end{pmatrix}=\begin{pmatrix}
1 & 0 \\
-\frac{1}{2} & \frac{1}{2}
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
\begin{pmatrix}
a_{1} & b_{1} \\
c_{1} & d_{1}
\end{pmatrix}\begin{pmatrix}
a_{2} & b_{2} \\
c_{2} & d_{2} 
\end{pmatrix}=\begin{pmatrix}
a_{1}a_{2}+b_{1}c_{2} & a_{1}b_{2}+b_{1}d_{2} \\
c_{1}a_{2}+d_{1}c_{2} & c_{1}b_{2}+d_{1}d_{2}
\end{pmatrix}=\begin{pmatrix}
1 & 0 \\
0 & 1
\end{pmatrix} \\
\begin{cases}
b_{2}=-\frac{b_{1}}{a_{1}}d_{2} \\
c_{2}=-\frac{c_{1}}{d_{1}}a_{2} \\
a_{1}a_{2}-\frac{b_{1}c_{1}}{d_{1}}a_{2}=1 \\
d_{1}d_{2}-\frac{c_{1}b_{1}}{a_{1}}d_{2}=1
\end{cases}\Rightarrow \begin{cases}
a_{2}=\frac{d_{1}}{\Delta} \\
d_{2}=\frac{a_{1}}{\Delta} \\
b_{2}=-\frac{b_{1}}{\Delta} \\
c_{2}=-\frac{c_{1}}{\Delta}
\end{cases}
\end{gather}$$

$$\begin{gather}
T=T^{ij}r_{i}\otimes r_{j}=T^{ij}K_{i}^ke_{k}\otimes K_{j}^le_{l}=D^{kl}e_{k}\otimes e_{l}\Rightarrow  \\
D^{kl}=T^{ij}K_{i}^kK_{j}^l \\
\end{gather}$$
$$\begin{gather}
\begin{cases}
D^{11}=T^{ij}K_{i}^1K^1_{j}=1\cdot 1\cdot 1+ -3\cdot 0=1  \\
D^{12}=T^{ij}K^{1}_{i}K^{2}_{j}=-\frac{1}{2}+-3\cdot 0=-\frac{1}{2} \\
D^{21}=T^{ij}K^{2}_{i}K^{1}_{j}=-\frac{1}{2} \\
D^{22}=T^{ij}K^{2}_{i}K^{2}_{j}=\frac{1}{4}+ -3\cdot \frac{1}{4}=-\frac{1}{2}
\end{cases} \\
B=P^{kl}e_{k}\otimes e_{l}=B^{ij}K^k_{i}K^l_{j}e_{k}\otimes e_{l} \\
\begin{cases}
P^{11}=-2 \\
P^{12}=\frac{1}{2} \\
P^{21}=B^{ij}K^{2}_{i}K^{1}_{j}=-2\cdot -0.5\cdot 1=0 \\
P^{22}=0.5
\end{cases}
\end{gather}$$
$$\begin{gather}
C=T\cdot B=(D^{kl}e_{k}\otimes e_{l})\cdot (P^{mn}e_{m}\otimes e_{n}) 
\end{gather}$$
Из определения скалярного произведения:
$$\begin{gather}
\begin{pmatrix}
1 \\
1
\end{pmatrix},\begin{pmatrix}
0 \\
2
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
C=D^{k}_{m}P^{mn}e_{k}\otimes e_{n} \\
D^k_{m}=g_{lm}D^{kl}
\end{gather}$$
2: Переводим всё в базис $r_{i}$:
```python
def basis_change_contr(A:list[list], P:list[list], nameA:str, nameAnew:str, nameP:str) -> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    for k in range(2):
        for l in range(2):
            print_output += f"{nameAnew}^{k+1}{l+1}={nameA}^ij*{nameP}^{k+1}_i*{nameP}^{l+1}_j="
            args: list[str] = []
            for i in range(2):
                for j in range(2):
                    args.append(f"{A[i][j]}*{P[k][i]}*{P[l][j]}")
                    C[k][l] += A[i][j]*P[k][i]*P[l][j]
            print_output += "+".join(args)+f"={C[k][l]}"+"\n"
    print(print_output)
    return C
  
def basis_change_co(A:list[list], Q:list[list], nameA:str, nameAnew:str, nameQ:str) -> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    for k in range(2):
        for l in range(2):
            print_output += f"{nameAnew}_{k+1}{l+1}={nameA}_ij*{nameQ}^i_{k+1}*{nameQ}^j_{l+1}="
            args: list[str] = []
            for i in range(2):
                for j in range(2):
                    args.append(f"{A[i][j]}*{Q[i][k]}*{Q[j][l]}")
                    C[k][l] += A[i][j]*Q[i][k]*Q[j][l]
            print_output += "+".join(args)+f"={C[k][l]}"+"\n"
    print(print_output)
    return C

  

def basis_change_mix_l(A:list[list], P:list[list], Q:list[list], nameA:str, nameAnew:str, nameP:str, nameQ:str) -> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    for k in range(2):
        for l in range(2):
            print_output += f"{nameAnew}^{k+1}_{l+1}={nameA}^i_j*{nameP}^{k+1}_i*{nameQ}^j_{l+1}="
            args: list[str] = []
            for i in range(2):
                for j in range(2):
                    args.append(f"{A[i][j]}*{P[k][i]}*{Q[j][l]}")
                    C[k][l] += A[i][j]*P[k][i]*Q[j][l]
            print_output += "+".join(args)+f"={C[k][l]}"+"\n"
    print(print_output)
    return C

def contract_mixmix(A: list[list], B: list[list], nameA: str, nameB: str, nameC: str)-> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    # C^i_j=A^i_k B^k_j
    for i in range(2):
        for j in range(2):
            print_output += f"{nameC}^{i+1}_{j+1}={nameA}^{i+1}_k {nameB}^k_{j+1}="
            args: list[str] = []
            for k in range(2):
                args.append(f"{A[i][k]}*{B[k][j]}")
                C[i][j] += A[i][k]*B[k][j]
            print_output += "+".join(args)+f"={C[i][j]}"+"\n"
    print(print_output)
    return C

def contract_contrco(A: list[list], B: list[list], nameA: str, nameB: str, nameC: str)-> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    # C^i_j=A^ik B_kj
    for i in range(2):
        for j in range(2):
            print_output += f"{nameC}^{i+1}_{j+1}={nameA}^{i+1}k {nameB}_k{j+1}="
            args: list[str] = []
            for k in range(2):
                args.append(f"{A[i][k]}*{B[k][j]}")
                C[i][j] += A[i][k]*B[k][j]
            print_output += "+".join(args)+f"={C[i][j]}"+"\n"
    print(print_output)
    return C

def contract_mixco(A: list[list], B: list[list], nameA: str, nameB: str, nameC: str)-> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    # C_ij=A^k_j B_ik
    for i in range(2):
        for j in range(2):
            print_output += f"{nameC}_{i+1}{j+1}={nameA}^k_{j+1} {nameB}^{i+1}_k="
            args: list[str] = []
            for k in range(2):
                args.append(f"{A[k][j]}*{B[i][k]}")
                C[i][j] += A[k][j]*B[i][k]
            print_output += "+".join(args)+f"={C[i][j]}"+"\n"
    print(print_output)
    return C
  
def contract_contrmix(A: list[list], B: list[list], nameA: str, nameB: str, nameC: str)-> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    # C^ij=A^ik B^j_k
    for i in range(2):
        for j in range(2):
            print_output += f"{nameC}^{i+1}{j+1}={nameA}^{i+1}k {nameB}^{j+1}_k="
            args: list[str] = []
            for k in range(2):
                args.append(f"{A[i][k]}*{B[j][k]}")
                C[i][j] += A[i][k]*B[j][k]
            print_output += "+".join(args)+f"={C[i][j]}"+"\n"
    print(print_output)
    return C
  
def contract2_contrcoco(A: list[list], B: list[list], nameA: str, nameB: str, nameC: str)-> list[list]:
    C: list[list] = [
        [0,0],
        [0,0]
    ]
    print_output: str = ""
    # C_ij=A^kl B_ik B_jl
    for i in range(2):
        for j in range(2):
            print_output += f"{nameC}_{i+1}{j+1}={nameA}^kl {nameB}_{i+1}k {nameB}_{j+1}l="
            args: list[str] = []
            for k in range(2):
                for l in range(2):
                    args.append(f"{A[k][l]}*{B[i][k]}*{B[j][l]}")
                    C[i][j] += A[k][l]*B[i][k]*B[j][l]
            print_output += "+".join(args)+f"={C[i][j]}"+"\n"
    print(print_output)
    return C

def inverse(A: list[list]) -> list[list]:
    det: float = A[0][0]*A[1][1]-A[0][1]*A[1][0]
    C = [
        [A[1][1]/det, -A[0][1]/det],
        [-A[1][0]/det, A[0][0]/det]
    ]
    print(C)
    return C

E = [
    [1, 0],
    [0,1]
]

T_r = [
    [1,0],
    [0,-3]
]

B_r=[
    [-2, -1],
    [-2, 1]
]

Q = [
    [1,0],
    [1,2]
]

"""
1 задание с проверкой
P = inverse(Q)
T_e = basis_change_contr(T_r,P,"T","D","P")
B_e = basis_change_contr(B_r,P,"B","P","K")
g = basis_change_co(E, Q, "δ", "g", "Q")
T_mix_e = contract_contrco(T_e, g, "D", "g", "D")
C_contr = contract_contrmix(B_e, T_mix_e, "P", "D", "C")
C_co = contract2_contrcoco(C_contr, g, "C", "g", "C")


T_mix_r = contract_contrco(T_r, E, "T", "δ", "T")
C_r = contract_contrmix(B_r, T_mix_r, "B", "T", "S")
C_r_co = contract2_contrcoco(C_r, E, "S", "δ", "S")
C_co_e = basis_change_co(C_r_co, Q, "S", "C", "Q")
"""

#A[i][j][k]
A_contrcontrcontr=[
    [
        [-3, -4, -4],
        [3, 3, 1],
        [-1, 3, 2]
    ],
    [
        [-4, 4, -4],
        [4, -2, 4],
        [-2, 3, 2]
    ],
    [
        [0, 3, 0],
        [3, -2, 4],
        [2, 4, -1]
    ]
]

def my_print3(A: list[list[list[float]]]):
    for i in range(3):
        for k in range(3):
            for j in range(3):
                print("\t"+f"{A[i][j][k]}", end="")
        print("")

#my_print3(A_contrcontrcontr)
def simm3(A: list[list[list[float]]]) -> list[list[list[float]]]:
    C = [[[0]*3]*3]*3
    for i in range(3):
        for k in range(3):
            for j in range(3):
                C[i][j][k] = 1/6 * (A[i][j][k]+A[j][k][i]+A[k][i][j]+A[j][i][k]+A[i][k][j]+A[k][j][i])
                print("\t"+f"{C[i][j][k]}", end="")
        print("")
    return C

def alter3(A: list[list[list[float]]]) -> list[list[list[float]]]:
    C = [[[0]*3]*3]*3
    for i in range(3):
        for k in range(3):
            for j in range(3):
                C[i][j][k] = 1/6 * (A[i][j][k]+A[j][k][i]+A[k][i][j]-A[j][i][k]-A[i][k][j]-A[k][j][i])
                print("\t"+f"{C[i][j][k]}", end="")
        print("")
    return C

"""
2 задание
simm3(A_contrcontrcontr)
alter3(A_contrcontrcontr)
"""
```
#### Задание 2
Не понял, зачем оно было нужно
#### Задание 3
$$\begin{gather}
A^i_{j}=\begin{pmatrix}
1 & 0 & 0 \\
0 & -\frac{1}{2} & \frac{\sqrt{ 3 }}{2} \\
0 & -\frac{\sqrt{ 3 }}{2} & -\frac{1}{2}
\end{pmatrix} \\
x^i=A^i_{j}\tilde{x}^j \\
\begin{cases}
\tilde{x}^1=r\cos\varphi  \\
\tilde{x}^2=r\sin\varphi  \\
\tilde{x}^3=z
\end{cases}\Leftrightarrow \begin{cases}
\tilde{x}^1=X^1\cos X^2 \\
\tilde{x}^2=X^1\sin X^2 \\
\tilde{x}^3=X^3
\end{cases} \\
\tilde{x}^i_{j}=\begin{pmatrix}
\cos X^2 & -X^1\sin X^2 & 0 \\
\sin X^2 & X^1\cos X^2 & 0 \\
0 & 0 & 1
\end{pmatrix} \\
x^i_{j}=A^i_{k}\tilde{x}^k_{j}\end{gather}$$
$$\begin{gather}
\begin{pmatrix}
1 & 0 & 0 \\
0 & -\frac{1}{2} & \frac{\sqrt{ 3 }}{2} \\
0 & -\frac{\sqrt{ 3 }}{2} & -\frac{1}{2}
\end{pmatrix} \begin{pmatrix}
\cos X^2  & -X^1 \sin X^2 & 0 \\
\sin X^2 & X^1\cos X^2 & 0 \\
0 & 0 & 1
\end{pmatrix}=\begin{pmatrix}
\cos X^2 & -X^1\sin X^2 &  0\\
 -\frac{1}{2}\sin X^2 &-\frac{1}{2}X^1\cos X^2  & \frac{\sqrt{ 3 }}{2} \\ 
 -\frac{\sqrt{ 3 }}{2}\sin X^2 & -\frac{\sqrt{ 3 }}{2}X^1\cos X^2 & -\frac{1}{2}
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
r_{k}=\left\{  \begin{pmatrix}
\cos X^2 \\
-\frac{1}{2}\sin X^2 \\
-\frac{\sqrt{ 3 }}{2}\sin X^2
\end{pmatrix},\begin{pmatrix}
-X^1\sin X^2 \\
-\frac{1}{2}X^1\cos X^2 \\
-\frac{\sqrt{ 3 }}{2}X^1\cos X^2
\end{pmatrix},\begin{pmatrix}
0 \\
\frac{\sqrt{ 3 }}{2} \\
-\frac{1}{2}
\end{pmatrix}  \right\}
\end{gather}$$
Здесь ошибка
$$\begin{gather}
g_{ij}=r_{i}r_{j}: \\
\begin{cases}
g_{11}=\cos^2X^2+\sin^2X^2=1  \\
g_{12}=X^1\left( -\sin X^2\cos X^2+\left( \frac{1}{4}+\frac{3}{4}\right) \sin X^2\cos X^2 \right)=0\\
g_{13}=0 \\
g_{22}=(X^1)^2(\sin^2X^2+\cos^2X^2)=(X^1)^2 \\
g_{23}=0 \\
g_{33}=1
\end{cases}\Rightarrow \begin{pmatrix}
1 & 0 & 0 \\
0 & (X^1)^2 & 0 \\
0 & 0 & 1
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
\Rightarrow (g^{ij})=\begin{pmatrix}
1 & 0 & 0 \\
 0 & \frac{1}{(X^1)^2} & 0 \\
0 & 0 & 1
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
\Rightarrow Q^{ik}=g^{jk}Q^i_{j} \\
\begin{cases}
Q^{11}=g^{j 1}Q^1_{j}=\cos X^2 \\
Q^{12}=g^{j 2}Q^1_{j}=(X^1)^{-2}\cdot -X^1\sin X^2 \\
Q^{13}=g^{j 3}Q^1_{j}=0 \\
Q^{21}=g^{j 1}Q^2_{j}=-\frac{1}{2}\sin X^2 \\
Q^{22}=g^{j 2}Q^2_{j}=(X^1)^{-2}\cdot -\frac{1}{2}X^1\cos X^2 \\
Q^{23}=g^{j 3}Q^2_{j}=\frac{\sqrt{ 3 }}{2} \\
Q^{31}=g^{j 1}Q^{3}_{j}=-\frac{\sqrt{ 3 }}{2}\sin X^2 \\
Q^{32}=g^{j 2}Q^3_{j}=(X^1)^{-2}\cdot -\frac{\sqrt{ 3 }}{2}X^1\cos X^2 \\
Q^{33}=g^{j 3}Q^{3}_{j}=-\frac{1}{2}
\end{cases}\Rightarrow \begin{pmatrix}
\cos X^2 & -\frac{1}{X^1}\sin X^2 & 0 \\
-\frac{1}{2}\sin X^2 & -\frac{1}{2} \frac{1}{X^1} \cos X^2 & \frac{\sqrt{ 3 }}{2} \\
-\frac{\sqrt{ 3 }}{2}\sin X^2 & -\frac{\sqrt{ 3 }}{2} \frac{1}{X^1}\cos X^2 & -\frac{1}{2}
\end{pmatrix}
\end{gather}$$
$$\begin{gather}
\Gamma_{ijk}=\frac{1}{2}\left( \frac{ \partial g_{ik} }{ \partial X^j } +\frac{ \partial g_{jk} }{ \partial X^i } -\frac{ \partial g_{ij} }{ \partial X^k }  \right) \\
k=1: \\
\frac{ \partial g_{i 1} }{ \partial X^j } =0, \frac{ \partial g_{j 1} }{ \partial X^i } =0,\frac{ \partial g_{ij} }{ \partial X^1 } =\begin{pmatrix}
0 & 0 & 0 \\
0 & 2X^1 & 0 \\
0 & 0 & 0
\end{pmatrix} \\
k=2: \\
\frac{ \partial g_{i 2} }{ \partial X^j } =\begin{pmatrix}
0 & 0 & 0 \\
2X^1 & 0 & 0 \\
0 & 0 & 0
\end{pmatrix},\frac{ \partial g_{j 2} }{ \partial X^i } =\begin{pmatrix}
0 & 2X^1 & 0 \\
0 & 0 & 0 \\
0 & 0 & 0
\end{pmatrix}, \frac{ \partial g_{ij} }{ \partial X^2 } =0 \\
k=3: \\
\frac{ \partial g_{i 3} }{ \partial X^j } =0=\frac{ \partial g_{j 3} }{ \partial X^i } ,\frac{ \partial g_{ij} }{ \partial X^3 } =0\Rightarrow 
\end{gather}$$
$$\begin{gather}
\Gamma_{ij 1}=\begin{pmatrix}
0 & 0 & 0 \\
0 & -X^1 & 0 \\
0 & 0 & 0
\end{pmatrix},\Gamma_{ij 2}=\begin{pmatrix}
0 & X^1 & 0 \\
X^1 & 0 & 0 \\
0 & 0 & 0
\end{pmatrix}, \Gamma_{ij 3}=0
\end{gather}$$
$$\begin{gather}
\Gamma_{ij}^l=g^{kl}\Gamma_{ijk}\Rightarrow  \\
\begin{cases}
\Gamma_{ij}^1=g^{k 1}\Gamma_{ijk}=g^{11}\Gamma_{ij 1}+g^{21}\Gamma_{ij 2}+g^{31}\Gamma_{ij 3}=\Gamma_{ij 1} \\
\Gamma^{2}_{ij}=g^{k 2}\Gamma_{ijk}=\frac{1}{(X^1)^2}\Gamma_{ij 2} \\
\Gamma_{ij}^3=g^{k 3}\Gamma_{ijk}=\Gamma_{ij 3}
\end{cases}
\end{gather}$$
$$\begin{gather}
H_{\alpha}=\sqrt{ g_{\alpha\alpha} }=\begin{pmatrix}
1 & \lvert X^1 \rvert  & 1
\end{pmatrix}
\end{gather}$$


























